(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{1600:function(e,n,t){"use strict";t.r(n),t.d(n,{MultiplayerGame:function(){return a}});var l=t(3888),r=t(7294),s=t(9367),o=t(1163),i=t(5893);let u=s.ZP.connect("http://localhost:3000");function a(){let e=(0,o.useRouter)(),{gameId:n}=e.query;u.emit("join",n);let[t,s]=(0,r.useState)(0),[a,c]=(0,r.useState)(!0),[h,d]=(0,r.useState)([Array(9).fill(null)]),[f,g]=(0,r.useState)(0),[m,x]=(0,r.useState)(!0);var j=h[f];console.log(`current move: ${f}`),(0,r.useEffect)(()=>{u.on("receive_turn",e=>{let n=e.turn;console.log(`history length: ${h.length}`),console.log(h),console.log(`newHistory length: ${n.length}`),console.log(h),n.length>h.length&&(console.log("history changed"),d(n)),g(n.length-1),c(!a)})},[u]),(0,r.useEffect)(()=>{console.log("history change hook"),u.emit("send_turn",{turn:h})},[h]);let v=h.map((e,n)=>(0,i.jsx)("li",{children:(0,i.jsx)("button",{onClick:()=>{d(h.slice(0,n+1)),g(n)},children:n>0?"Move #"+n:"Restart"})}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:`Room Code: ${n} `}),(0,i.jsx)("div",{className:"game-board",children:(0,i.jsx)(l.Board,{xIsNext:a,squares:j,onPlay:function(e){let n=[...h.slice(0,f+1),e];d(n),g(n.length-1),c(!a)}})}),(0,i.jsxs)("div",{className:"game-info"+(1==h.length?" hidden":""),children:[(0,i.jsx)("h2",{children:"Rewind:"}),(0,i.jsx)("ul",{className:"moves-list",children:v})]})]})}a.getInitialProps=async({req:e})=>{let n=e?e.headers["user-agent"]:navigator.userAgent;return{userAgent:n}},n.default=a},3888:function(e,n,t){"use strict";t.r(n),t.d(n,{Board:function(){return u},Row:function(){return i},Square:function(){return s},default:function(){return a}});var l=t(7294),r=t(5893);function s({num:e,value:n,onSquareClick:t,winningSquares:l}){var s=!1;console.log(l);for(let n=0;n<l.length;n++)l[n]==e-1&&(s=!0);return(0,r.jsx)("button",{className:"square"+(1==s?"  winning-square":""),onClick:function(){console.log(console.log("square #"+e+" clicked: value:"+n)),t(e-1)},children:n})}function o(e,n,t){let l=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let r=0;r<l.length;r++){let[s,o,i]=l[r];if(e[s]&&e[s]===e[o]&&e[s]===e[i])return null==n[0]&&t(l[r].slice()),e[s]}for(let n=0;n<e.length;n++){var r=!0;if(null==e[n]){r=!1;break}}return r?(console.log("Draw!"),"Draw!"):null}function i({start:e,squares:n,handleClick:t,winningSquares:l}){for(var o=[],i=0;i<3;i++){var u=i+e;o.push((0,r.jsx)(s,{num:u,value:n[u-1],onSquareClick:t,winningSquares:l}))}return(0,r.jsx)("div",{className:"row",children:o})}function u({xIsNext:e,squares:n,onPlay:t}){var s=[];let[u,a]=(0,l.useState)([,,,].fill(null)),c=o(n,u,a);function h(l){if(n[l]||o(n,u,a))return;let r=n.slice();r[l]=e?"O":"X",t(r)}s.push((0,r.jsx)(r.Fragment,{children:(0,r.jsx)("h2",{className:"status-text",children:c?"Draw!"==c?c:"Winner: "+(e?"X":"O")+"!":"Next player: "+(e?"O":"X")})}));for(var d=0;d<3;d++)s.push((0,r.jsx)(i,{start:3*d+1,squares:n,handleClick:h,winningSquares:u}));return s}function a(){let[e,n]=(0,l.useState)(Math.floor(2*Math.random())>0),[t,s]=(0,l.useState)([Array(9).fill(null)]),[o,i]=(0,l.useState)(0),a=t[o],c=t.map((e,n)=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>{s(t.slice(0,n+1)),i(n)},children:n>0?"Go to move #"+n:"Restart"})}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"game-board",children:(0,r.jsx)(u,{xIsNext:e,squares:a,onPlay:function(l){let r=[...t.slice(0,o+1),l];s(r),i(r.length-1),n(!e)}})}),(0,r.jsxs)("div",{className:"game-info"+(1==t.length?" hidden":""),children:[(0,r.jsx)("h2",{children:"Rewind:"}),(0,r.jsx)("ul",{className:"moves-list",children:c})]})]})}},5022:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/multiplayer",function(){return t(1600)}])}},function(e){e.O(0,[286,774,888,179],function(){return e(e.s=5022)}),_N_E=e.O()}]);